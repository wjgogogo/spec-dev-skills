# 功能规格：[功能名称]

> **文件路径**：`.claude/specs/[功能名称].md`
> **创建时间**：[日期]
> **版本**：1.0

---

## 概述

[1-2 句话说明该功能的作用以及存在的原因。例如：用户认证功能允许用户通过账号密码或第三方 OAuth 安全登录系统，从而保护用户数据并提供个性化体验。]

---

## 环境分析

### 技术环境
- **运行平台**：[例：Web 浏览器、Node.js 18+、iOS 16+]
- **基础设施**：[例：AWS / 阿里云，数据库：PostgreSQL 14+]
- **网络条件**：[例：支持离线模式 / 需要稳定网络]
- **性能基线**：[例：支持 1000 并发用户，99.9% 可用性]

### 业务环境
- **服务时间**：[例：7×24 小时 / 工作日 9:00-18:00]
- **用户规模**：[例：日活 10 万用户]
- **地域范围**：[例：全国 / 全球]

---

## 参与者分析

### 主要参与者
- **[参与者]**：[角色和交互方式，例如：注册用户 - 使用系统功能的核心业务人员]

### 次要参与者（如有）
- **[系统/服务]**：[角色，例如：支付网关 - 处理支付请求的外部服务]

---

## 功能需求

> **EARS 语法速查**：
> - 通用型：`<系统> 应 <响应>`
> - 状态驱动：`当处于 <状态> 时，<系统> 应 <响应>`
> - 事件驱动：`当 <事件> 发生时，<系统> 应 <响应>`
> - 可选功能：`若 <功能存在>，<系统> 应 <响应>`
> - 不良行为：`若 <条件>，则 <系统> 应 <响应>`

### FR-[模块缩写]-001：[需求标题]

**EARS**：[完整的 EARS 语法句子，例如：当用户点击登录按钮时，系统应验证用户凭证并在 2 秒内返回结果。]

**验收标准**：
- Given [前置条件 / 初始状态]
- When [用户操作或触发事件]
- Then [预期的系统响应]
- And [附加断言，可选]

---

### FR-[模块缩写]-002：[需求标题]

**EARS**：[EARS 语句]

**验收标准**：
- Given [前置条件]
- When [触发事件]
- Then [预期结果]

---

### FR-[模块缩写]-003：[异常处理需求标题]

**EARS**：若 [异常条件]，则系统应 [兜底响应]。

**验收标准**：
- Given [异常场景初始状态]
- When [触发异常的操作]
- Then [系统给出明确的错误反馈]
- And [数据状态保持一致，无副作用]

---

<!-- 根据功能复杂度，按照以上格式继续添加 FR 需求 -->

---

## 非功能需求

### NFR-PERF-001：响应性能
**EARS**：系统应在 [X] 毫秒内响应 [核心操作]。
- **度量指标**：P95 响应时间 ≤ [X]ms；P99 ≤ [Y]ms

### NFR-SEC-001：数据安全
**EARS**：系统应对 [敏感数据类型] 进行加密存储和传输。
- **标准**：传输使用 TLS 1.3，存储使用 AES-256

### NFR-ACC-001：可用性
**EARS**：系统应保证 [功能] 的月可用性不低于 [X]%。
- **度量指标**：月可用性 ≥ [99.9]%

---

## 约束条件

- **技术约束**：[例：必须兼容现有认证体系，不引入新的身份提供商依赖]
- **业务约束**：[例：上线前需通过安全审计]
- **时间约束**：[例：需在 Q2 前完成]

---

## 依赖关系

- [该功能依赖的内部模块或外部服务，例：依赖用户中心模块的用户查询接口]
- [前置功能或数据，例：需要数据库中已有用户表结构]

---

## 范围外（Out of Scope）

> 明确声明不在本次迭代内的内容，防止范围蔓延。

- [明确排除项，例：不包含第三方 OAuth 登录，仅支持账号密码认证]
- [明确排除项，例：不包含管理后台的用户管理功能]

---

## 开发信息

> 由 `/dev` 命令自动填写，初始创建时留空。

- **分支**：`feature/[功能名称]`
- **Worktree 路径**：`../[功能名称]`（仅 `--worktree` 模式）
- **开始时间**：—
- **状态**：待开始 → 进行中 → 已完成 → 已审查
